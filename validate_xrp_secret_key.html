<!doctype html>
<html lang="eng">
    <head>
        <meta charset="utf-8">

        <title>Validate an XRP Secret Key</title>

		<style>
			input[type=text] {
				width:50%;
				padding:5px;
			}
		</style>
		
		<!--
		
			A modern JavaScript utility library that is a dependency of the RippleAPI
			https://lodash.com/ You'll need to download the full build, minified and then change the file name to include the version number.
			
			---------------------------
			Checksum information
			---------------------------
			Name: lodash-4.17.15-min.js
			Size: 73261 bytes
			SHA256: 55E35A1415438685F71FE809DFB0E94FF9D3B994DD8D8AE8F7206BB878D59A84
			
			Confirm you are using the original, unchanged file direct from Lodash by double checking the SHA256 hash of the lodash-??.??.??-min.js file.

		-->
		<script src="assets/lodash-4.17.15-min.js"></script>
		
		<!--
		
			A JavaScript API for interacting with the XRP Ledger in Node.js AND/OR a browser
			https://github.com/ripple/ripple-lib/releases 
		
			---------------------------
			Checksum information
			---------------------------
			Name: ripple-1.3.3-min.js
			Size: 583448 bytes
			SHA256: B870C074ECC7BD1A7026293331E5A7B794CD2BF59B39A36FA506AF7DDDBF5B53
			
			Confirm you are using the original, unchanged file direct from Ripple by double checking the SHA256 hash of the ripple-??.??.??-min.js file.

		-->
		<script src="assets/ripple-1.3.3-min.js"></script>
    </head>

	<body class="" style="margin:20px 20px 20px 20px; font-family:consolas, 'courier new', courier, monospace;">

		<h1>Validate an XRP Secret Key</h1>
		<h2>NOTE: You should be using an OFFLINE, "air gapped" device for this process.</h2>

		<p>Refresh the page to restart the process.</p>
		
		<br>
		
		<label id="inp_secret_key_label" for="inp_secret_key" class="" style="">Secret Key</label>
		<input id="inp_secret_key" name="inp_secret_key" type="text" class="" style="" maxlength="29" placeholder="Enter an 'XRP Secret Key' here. 29 characters.">
		
		<div style="clear:both;"></div>
		<br>

		<label id="inp_public_address_label" for="inp_public_address" class="" style="">Public Address</label>
		<input id="inp_public_address" name="inp_public_address" type="text" class="" style="background-color:lightgray;" maxlength="35" placeholder="The 'XRP Public Address' will appear here." readonly>
		
		<div style="clear:both;"></div>
		<br>
		
		<script>
			function fun_ValidateSecretKey() {
				"use strict";
				
				// FOR TESTING PURPOSES ONLY. For the love of God, don't use this account for real XRPs.
				// XRP Secret Key = snLRRcctMXnQT6VEtV716PY7qUXhR
				// XRP Public Address = rGQvbzosP5XGWSfAjXzJppkwbZuMZSwfMw
				
				const api = new ripple.RippleAPI({
					// server: 'wss://s2.ripple.com' // Notice that this is disabled, because there is no need to communicate online to generate/validate XRP accounts.
				});
				
				var ele_inp_secret_key = document.getElementById('inp_secret_key');
				var str_secret_key = "";
				
				var str_public_key = "";
				
				var obj_xrp_account_keys = {};
				
				var ele_inp_public_address = document.getElementById('inp_public_address');
				var str_public_address = "";
				

				//Check that the entered 'Secret Key' is a valid
				str_secret_key = ele_inp_secret_key.value;
				if (api.isValidSecret(str_secret_key) == false) {
					alert("You need to enter a valid 'Secret Key' before you can validate its 'Public Address'.");
					return; //Exit the function.
				}

				//Derive the 'Public Key' (needed to derive the 'Public Address').
				obj_xrp_account_keys = api.deriveKeypair(str_secret_key);
				str_public_key = obj_xrp_account_keys.publicKey;
				
				//Derive the 'Public Address'.
				str_public_address = api.deriveAddress(str_public_key);

				ele_inp_public_address.value = str_public_address;
				
				// Make the 'Secret Key' field read only.
				ele_inp_secret_key.readOnly = true;
				ele_inp_secret_key.style.backgroundColor = 'lightgray';
				
				// Hide the 'Validate' button.
				document.getElementById('button_validate').style.display = 'none';
			}
		</script>
		<button id="button_validate" type="button" onclick="fun_ValidateSecretKey();" class="" style="">
			Validate
		</button>
	</body>

</html>